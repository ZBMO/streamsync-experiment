(function(e,I){typeof exports=="object"&&typeof module<"u"?module.exports=I(require("vue"),require("../injectionKeys")):typeof define=="function"&&define.amd?define(["vue","../injectionKeys"],I):(e=typeof globalThis<"u"?globalThis:e||self,e.StreamsyncCustomComponentTemplates=I(e.vue,e.injectionKeys))})(this,function(e,I){"use strict";var l=(c=>(c.Text="Text",c.KeyValue="Key-Value",c.Color="Color",c.Shadow="Shadow",c.Number="Number",c.Object="Object",c.IdKey="Identifying Key",c))(l||{}),S=(c=>(c.General="General",c.Style="Style",c))(S||{});const P={name:"Accent",type:l.Color,category:S.Style,applyStyleVariable:!0},A={name:"Primary text",type:l.Color,category:S.Style,applyStyleVariable:!0},L={name:"Secondary text",type:l.Color,category:S.Style,applyStyleVariable:!0};l.Color,S.Style;const M={name:"Container background",type:l.Color,category:S.Style,applyStyleVariable:!0},F={name:"Container shadow",type:l.Shadow,category:S.Style,applyStyleVariable:!0},B={name:"Separator",type:l.Color,category:S.Style,applyStyleVariable:!0},w={name:"Button",type:l.Color,category:S.Style,applyStyleVariable:!0},D={name:"Button text",type:l.Color,category:S.Style,applyStyleVariable:!0},$={name:"Button shadow",type:l.Shadow,category:S.Style,applyStyleVariable:!0};l.Color,S.Style;const x={name:"Custom CSS classes",type:l.Text,category:S.Style,desc:"CSS classes, separated by spaces. You can define classes in custom stylesheets."},H={key:0},R={streamsync:{name:"Section",description:"A container component that divides the layout into sections, with an optional title.",category:"Layout",allowedChildrenTypes:["*"],fields:{title:{name:"Title",init:"Section Title",desc:"Leave blank to hide.",type:l.Text},accentColor:P,primaryTextColor:A,secondaryTextColor:L,containerBackgroundColor:M,containerShadow:F,separatorColor:B,buttonColor:w,buttonTextColor:D,buttonShadow:$,snapMode:{name:"Snap mode",type:l.Text,options:{no:"No",yes:"Yes"},default:"no",init:"no",category:S.Style,desc:"Use as much space as possible without altering the size of the container."},cssClasses:x},previewField:"title"}},z=e.defineComponent({...R,__name:"CustomCoreSection",setup(c){const o=e.inject(I.core),a=e.inject(I.instancePath),m=["laser-toggle"];var _=!1;function f(n,u){m.includes(n)&&(_=u=="yes")}function h(n){const u=n.closest(".CoreTab");var t=o.getComponentById(u.dataset.streamsyncId),y=t.content.customId;return y}function p(n){const u=n.target.closest("[data-streamsync-id]");var t=o.getComponentById(u.dataset.streamsyncId),y=t.content.customId,b=h(u),T=b+y,E=u.dataset.streamsyncId;return T!=""?T:E}function r(n,u){const t=n.target.nodeName;return u.includes(t)}function d(n){const u=n.target.closest("[data-streamsync-id]");var t=o.getComponentById(u.dataset.streamsyncId);return t.type.includes("tab")}function i(n){if(console.log("captureClick: "),console.log(n),d(n)||(n.stopPropagation(),!r(n,["BUTTON"]))||_)return;const u=p(n),t=new CustomEvent("click",{detail:{payload:{id:u}}});o.forwardEvent(t,a,!0)}function s(n){if(console.log("captureInput: "),console.log(n),n.stopPropagation(),!r(n,["INPUT"]))return;const u=p(n),t=n.target.value,y=new CustomEvent("input",{detail:{payload:{id:u,value:t}}});o.forwardEvent(y,a,!0)}function C(n){if(console.log("captureChange: "),console.log(n),n.stopPropagation(),!r(n,["SELECT","INPUT"]))return;const u=p(n),t=n.target.value,y=new CustomEvent("change",{detail:{payload:{id:u,value:t}}});f(u,t),o.forwardEvent(y,a,!0)}const g=e.inject(I.evaluatedFields);return(n,u)=>(e.openBlock(),e.createElementBlock("section",{class:e.normalizeClass(["CoreSection",{snapMode:e.unref(g).snapMode.value=="yes"}]),ref:"rootEl",onClickCapture:i},[e.unref(g).title.value?(e.openBlock(),e.createElementBlock("h2",H,e.toDisplayString(e.unref(g).title.value)+" CUSTOM SECTION",1)):e.createCommentVNode("",!0),e.createElementVNode("div",{"data-streamsync-container":"",onInputCapture:s,onChangeCapture:C},[e.renderSlot(n.$slots,"default",{},void 0,!0)],32)],34))}}),Be="",N=(c,o)=>{const a=c.__vccOpts||c;for(const[m,_]of o)a[m]=_;return a},Y=N(z,[["__scopeId","data-v-9873243d"]]);function q(c){const o={ctrlKey:c.ctrlKey,shiftKey:c.shiftKey,metaKey:c.metaKey};return new CustomEvent("ss-click",{detail:{payload:o}})}const G=["aria-disabled"],K={streamsync:{name:"Button",description:"A standalone button component that can be linked to a click event handler.",docs:"\nStreamsync uses the library RemixIcon to display icons. To include an icon, check remixicon.com, find the icon's id (such as `arrow-up`) and it to your _Button_.\n",category:"Other",events:{"ss-click":{desc:"Capture single clicks.",stub:`
def handle_button_click(state):

	# Increment counter when the button is clicked

	state["counter"] += 1`.trim()}},fields:{text:{name:"Text",init:"Button Text",type:l.Text},customId:{name:"CustomId",init:"Button CustomId",type:l.Text},isDisabled:{name:"Disabled",default:"no",type:l.Text,options:{yes:"Yes",no:"No"},desc:"Disables all event handlers."},buttonColor:w,buttonTextColor:D,icon:{name:"Icon",type:l.Text,desc:'A RemixIcon id, such as "arrow-up".',category:S.Style},buttonShadow:$,separatorColor:B,cssClasses:x},previewField:"text"}},Q=e.defineComponent({...K,__name:"CustomCoreButton",setup(c){const o=e.ref(null),a=e.inject(I.evaluatedFields),m=e.inject(I.isDisabled);e.watch(a.isDisabled,f=>{m.value=f=="yes"},{immediate:!0});function _(f){const h=q(f);o.value.dispatchEvent(h)}return(f,h)=>(e.openBlock(),e.createElementBlock("button",{class:"CoreButton","aria-disabled":e.unref(m),ref_key:"rootEl",ref:o,onClick:_},[e.unref(a).icon.value?(e.openBlock(),e.createElementBlock("i",{key:0,class:e.normalizeClass([`ri-${e.unref(a).icon.value}-line`,`ri-${e.unref(a).icon.value}`])},null,2)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(e.unref(a).text.value),1)],8,G))}}),Oe="",W=N(Q,[["__scopeId","data-v-01c4d6aa"]]),v={core:Symbol(),builderManager:Symbol(),evaluatedFields:Symbol(),componentId:Symbol(),isBeingEdited:Symbol(),isDisabled:Symbol(),getChildrenVNodes:Symbol(),renderProxiedComponent:Symbol(),instancePath:Symbol(),flattenedInstancePath:Symbol(),instanceData:Symbol()};function O(c,o,a){const m=e.ref(),_=e.ref(!1),f=e.ref(null),h=e.computed(()=>c.getComponentById(o));function p(r,d,i){var u,t;m.value=r;const s=(u=h.value.handlers)==null?void 0:u[d],C=((t=h.value.binding)==null?void 0:t.eventType)==d;if(!s&&!C)return;if(_.value){f.value={eventValue:r,emitEventType:d};return}_.value=!0;const g=()=>{_.value=!1,f.value&&(p(f.value.eventValue,f.value.emitEventType),f.value=null),i==null||i()},n=new CustomEvent(d,{detail:{payload:r,callback:g}});a.value.dispatchEvent(n)}return e.watch(()=>c.getBindingValue(o),r=>{_.value||(m.value=r)},{immediate:!0}),e.watch(m,r=>{typeof r>"u"&&(m.value="")},{immediate:!0}),{formValue:m,handleInput:p}}const X={class:"mainLabel"},Z={class:"selectContainer"},ee=["value"],te=["value"],ne="A user input component that allows users to select a single value from a list of options using a dropdown menu.",oe={a:"Option A",b:"Option B"},ae=`
def onchange_handler(state, payload):

	# Set the state variable "selected" to the selected option

	state["selected"] = payload`,se={streamsync:{name:"Dropdown Input",description:ne,category:"Input",fields:{label:{name:"Label",init:"Input Label",type:l.Text},customId:{name:"CustomId",init:"Dropdown CustomId",type:l.Text},options:{name:"Options",desc:"Key-value object with options. Must be a JSON string or a state reference to a dictionary.",type:l.KeyValue,default:JSON.stringify(oe,null,2)},cssClasses:x},events:{"ss-option-change":{desc:"Sent when the selected option changes.",stub:ae.trim(),bindable:!0}}}},re=e.defineComponent({...se,__name:"CoreDropdownInput",setup(c){const o=e.inject(v.evaluatedFields),a=e.ref(null),m=e.inject(v.core),_=e.inject(v.componentId),{formValue:f,handleInput:h}=O(m,_,a);return(p,r)=>(e.openBlock(),e.createElementBlock("div",{class:"CoreDropdownInput",ref_key:"rootEl",ref:a},[e.createElementVNode("label",X,e.toDisplayString(e.unref(o).label.value),1),e.createElementVNode("div",Z,[e.createElementVNode("select",{value:e.unref(f),onInput:r[0]||(r[0]=d=>e.unref(h)(d.target.value,"ss-option-change"))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o).options.value,(d,i)=>(e.openBlock(),e.createElementBlock("option",{key:i,value:i},e.toDisplayString(d),9,te))),128))],40,ee)])],512))}}),je="",le=N(re,[["__scopeId","data-v-4bb976b5"]]),ce=["type","value","placeholder"],ie="A user input component that allows users to enter single-line text values.",J=`
def onchange_handler(state, payload):

	# Set the state variable "new_val" to the new value

	state["new_val"] = payload`,ue={streamsync:{name:"Text Input",description:ie,category:"Input",fields:{label:{name:"Label",init:"Input Label",type:l.Text},customId:{name:"CustomId",init:"Input CustomId",type:l.Text},placeholder:{name:"Placeholder",type:l.Text},passwordMode:{name:"Password mode",default:"no",type:l.Text,options:{no:"No",yes:"Yes"},category:S.Style},cssClasses:x},events:{"ss-change":{desc:"Capture changes as they happen.",stub:J,bindable:!0},"ss-change-finish":{desc:"Capture changes once this control has lost focus.",stub:J}}}},de=e.defineComponent({...ue,__name:"CoreTextInput",setup(c){const o=e.inject(v.evaluatedFields),a=e.ref(null),m=e.inject(v.core),_=e.inject(v.componentId),{formValue:f,handleInput:h}=O(m,_,a);return(p,r)=>(e.openBlock(),e.createElementBlock("div",{class:"CoreTextInput",ref_key:"rootEl",ref:a},[e.createElementVNode("label",null,e.toDisplayString(e.unref(o).label.value),1),e.createElementVNode("input",{type:e.unref(o).passwordMode.value=="yes"?"password":"text",value:e.unref(f),onInput:r[0]||(r[0]=d=>e.unref(h)(d.target.value,"ss-change")),onChange:r[1]||(r[1]=d=>e.unref(h)(d.target.value,"ss-change-finish")),placeholder:e.unref(o).placeholder.value,"aria-autocomplete":"none"},null,40,ce)],512))}}),Pe="",pe=N(de,[["__scopeId","data-v-62fee226"]]),me=["value","placeholder","min","max","step"],fe="A user input component that allows users to enter numeric values.",U=`
def onchange_handler(state, payload):

	# Set the state variable "new_val" to the new value

	state["new_val"] = payload`,ye={streamsync:{name:"Number Input",description:fe,category:"Input",fields:{label:{name:"Label",init:"Input Label",type:l.Text},placeholder:{name:"Placeholder",type:l.Text},minValue:{name:"Minimum value",type:l.Number,default:null},maxValue:{name:"Max value",type:l.Number,default:null},customId:{name:"CustomId",init:"Input CustomId",type:l.Text},valueStep:{name:"Step",type:l.Number,default:"1"},cssClasses:x},events:{"ss-number-change":{desc:"Capture changes as they happen.",stub:U,bindable:!0},"ss-number-change-finish":{desc:"Capture changes once this control has lost focus.",stub:U}}}},_e=e.defineComponent({...ye,__name:"CustomNumberInput",setup(c){const o=e.inject(v.evaluatedFields),a=e.ref(null),m=e.ref(null),_=e.inject(v.core),f=e.inject(v.componentId),{formValue:h,handleInput:p}=O(_,f,a);function r(){if(m.value.value=="")return null;let s=parseFloat(m.value.value);return isNaN(s)||(o.minValue.value!==null&&s<o.minValue.value&&(s=o.minValue.value,m.value.value=s),o.maxValue.value!==null&&s>o.maxValue.value&&(s=o.maxValue.value,m.value.value=s)),s}function d(){const s=r();isNaN(s)||p(s,"ss-number-change")}function i(){const s=r();isNaN(s)||p(s,"ss-number-change-finish")}return(s,C)=>(e.openBlock(),e.createElementBlock("div",{class:"CoreNumberInput",ref_key:"rootEl",ref:a},[e.createElementVNode("label",null,e.toDisplayString(e.unref(o).label.value),1),e.createElementVNode("input",{type:"number",ref_key:"inputEl",ref:m,onInput:d,onChange:i,value:e.unref(h),placeholder:e.unref(o).placeholder.value,min:e.unref(o).minValue.value!==null?e.unref(o).minValue.value:void 0,max:e.unref(o).maxValue.value!==null?e.unref(o).maxValue.value:void 0,step:e.unref(o).valueStep.value!==null?e.unref(o).valueStep.value:void 0},null,40,me)],512))}}),Ae="",be=N(_e,[["__scopeId","data-v-bb0c4c5a"]]),he={class:"CoreTabs"},ge={class:"tabSelector horizontal","data-streamsync-cage":"","data-streamsync-container":""},Ce={class:"container"},Ie={streamsync:{name:"Tab Container",description:"A container component for organising and displaying Tab components in a tabbed interface.",category:"Layout",allowedChildrenTypes:["custom_customtab","repeater"],fields:{accentColor:P,primaryTextColor:A,secondaryTextColor:L,containerBackgroundColor:M,containerShadow:F,separatorColor:B,buttonColor:w,buttonTextColor:D,buttonShadow:$,cssClasses:x}}},Se=e.defineComponent({...Ie,__name:"CustomTabs",setup(c){const o=e.inject(I.instanceData);return o.at(-1).value={activeTab:void 0},(a,m)=>(e.openBlock(),e.createElementBlock("div",he,[e.createElementVNode("nav",ge,[e.renderSlot(a.$slots,"default",{instanceNumber:0},void 0,!0)]),e.createElementVNode("div",Ce,[e.renderSlot(a.$slots,"default",{instanceNumber:1},void 0,!0)])]))}}),Me="",Te=N(Se,[["__scopeId","data-v-e4e6c56a"]]);function ve(c){const o=/[\\]?@{([^}]*)}/g;function a(p){var d,i;const r={};for(let s=0;s<p.length-1;s++){const C=p[s],{componentId:g}=C,{type:n}=c.getComponentById(g);if(n!=="repeater"||s+1>=p.length)continue;const u=p.slice(0,s+1),t=p.slice(0,s+2),{instanceNumber:y}=t.at(-1),b=f(u,"repeaterObject");if(!b)continue;const T=Object.entries(b),E=f(u,"keyVariable"),k=f(u,"valueVariable");r[E]=(d=T[y])==null?void 0:d[0],r[k]=(i=T[y])==null?void 0:i[1]}return r}function m(p,r){if(p==null)return"";const d=a(r);return p.replace(o,(s,C)=>{if(s.charAt(0)=="\\")return s.substring(1);const g=C.trim();if(!g)return"";const n=c.evaluateExpression(g,d);return typeof n>"u"?"":typeof n=="object"?JSON.stringify(n):n})}function _(p){const{componentId:r}=p.at(-1),d=c.getComponentById(r);if(!d)return;const i={},{fields:s}=c.getComponentDefinition(d.type);if(s)return Object.keys(s).forEach(C=>{i[C]=e.computed(()=>f(p,C))}),i}function f(p,r){var y;const{componentId:d}=p.at(-1),i=c.getComponentById(d);if(!i)return;const{fields:s}=c.getComponentDefinition(i.type),C=(y=i.content)==null?void 0:y[r],g=s[r].default,n=m(C,p),u=s[r].type,t=typeof n>"u"||n===null||n==="";if(u==l.Object||u==l.KeyValue){if(!n)return JSON.parse(g)??null;if(typeof n!="string")return n;let b;try{b=JSON.parse(n)}catch{return JSON.parse(g)??null}return b}else if(u==l.Number){const b=g===null?null:parseFloat(g);if(t)return b??null;const T=parseFloat(n);return typeof T===void 0||Number.isNaN(T)?b??null:T}else return u==l.IdKey?C:t?g??"":n}function h(p,r){let d;const i=c.getComponentById(p);return i?typeof i.visible>"u"||i.visible===!0?!0:i.visible===!1?!1:(r&&(d=a(r)),!!c.evaluateExpression(i.visible,d)):void 0}return{getEvaluatedFields:_,isComponentVisible:h}}const xe={class:"CoreTab"},Ne={key:1,class:"container","data-streamsync-container":""},V=0,j=1,Ee={streamsync:{name:"Tab",description:"A container component that displays its child components as a tab inside a Tab Container.",allowedParentTypes:["custom_customtabs","repeater"],allowedChildrenTypes:["*"],category:"Layout",fields:{name:{name:"Name",default:"(No name)",init:"Tab Name",type:l.Text},customId:{name:"CustomId",init:"Tab CustomId",type:l.Text},cssClasses:x},previewField:"name"}},Ve=e.defineComponent({...Ee,__name:"CustomTab",setup(c){const o=e.inject(I.evaluatedFields),a=e.inject(I.instancePath),m=e.inject(I.instanceData),_=e.inject(I.core),f=e.inject(I.builderManager),h=e.inject(I.componentId),{isComponentVisible:p}=ve(_),r=e.computed(()=>f==null?void 0:f.getSelectedId()),d=()=>{for(let t=-2;t>-1*a.length;t--){const y=a.at(t),{type:b}=_.getComponentById(y.componentId);if(b==="custom_customtabs")return t+1}},i=e.computed(()=>{const t=d();return a.at(t)}),s=()=>{for(let t=-1;t>-1*a.length;t--){const y=a.at(t),{type:b}=_.getComponentById(y.componentId);if(b==="custom_customtabs")return m.at(t)}},C=()=>{const t=d(),y=a.slice(0,t),b=t+1<0?a.slice(t+1):[];return[...y,{componentId:a.at(t).componentId,instanceNumber:j},...b]},g=()=>{const t=s();t.value={activeTab:C()}},n=t=>{const y=_.getComponentById(t);return!y||y.type=="root"?!1:y.parentId==h?!0:n(y.parentId)};e.watch(r,t=>{t&&n(t)&&g()});const u=e.computed(()=>{var T;let t;(i==null?void 0:i.value.instanceNumber)==V?t=C():t=a;const b=(T=s().value)==null?void 0:T.activeTab;return JSON.stringify(b)==JSON.stringify(t)});return e.onBeforeMount(()=>{var b;if((i==null?void 0:i.value.instanceNumber)==V)return;const t=s();(b=t.value)!=null&&b.activeTab||p(h,a)&&(t.value={activeTab:a})}),(t,y)=>{var b,T,E,k;return e.withDirectives((e.openBlock(),e.createElementBlock("div",xe,[((b=i.value)==null?void 0:b.instanceNumber)==V?(e.openBlock(),e.createElementBlock("button",{key:0,class:e.normalizeClass(["bit",{active:u.value}]),onClick:g,tabindex:"0"},e.toDisplayString(e.unref(o).name.value),3)):e.createCommentVNode("",!0),((T=i.value)==null?void 0:T.instanceNumber)==j?e.withDirectives((e.openBlock(),e.createElementBlock("div",Ne,[e.renderSlot(t.$slots,"default",{},void 0,!0)],512)),[[e.vShow,u.value]]):e.createCommentVNode("",!0)],512)),[[e.vShow,((E=i.value)==null?void 0:E.instanceNumber)==V||((k=i.value)==null?void 0:k.instanceNumber)==j&&u.value]])}}}),Je="";return{customsection:Y,custombutton:W,customdropdown:le,customtextinput:pe,customnumberinput:be,customtabs:Te,customtab:N(Ve,[["__scopeId","data-v-5df8d725"]])}});
